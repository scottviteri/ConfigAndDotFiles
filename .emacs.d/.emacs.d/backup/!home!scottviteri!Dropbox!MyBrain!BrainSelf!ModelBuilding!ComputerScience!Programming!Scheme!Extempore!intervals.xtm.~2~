
(sys:load "/home/scottviteri/LocalSoftware/Extempore-0.7.0-Ubuntu/extempore/libs/core/instruments.xtm")
(sys:load "/home/scottviteri/LocalSoftware/Extempore-0.7.0-Ubuntu/extempore/libs/core/instruments-scm.xtm")

(bind-instrument synth synth_note_c synth_fx)
(bind-instrument default default_note_c default_fx)
(bind-instrument organ organ_note_c organ_fx)

(bind-func dsp:DSP
  (lambda (in time chan dat)
    (synth in time chan dat)))

(dsp:set! dsp)

(define play-seq
  (lambda ()
    (play-note (now) synth 60 100 10000)
    (play-note (+ (now) 22050) synth 64 100 10000)
    (play-note (+ (now) 44100) synth 67 100 10000)
    (play-note (+ (now) (+ 22050 44100)) synth 72 100 10000))
  )

(play-seq)

(play-note (+ (now) 100) synth 60 150 *second*)

(define chord
  (lambda (notes)
    (if (not (null? notes))
        (begin (play-note (now) synth (car notes) 120 *second*)
               (chord (cdr notes))))))

(chord '(60 65 68))

(bind-func p (lambda ()
               (xtm_play_note (now) synth 440.0 1.0 44100 0 (zalloc))))

($ (xtm_play_note (now) synth 440.0 1.0 44100 0 (zalloc)))
($ (xtm_play_note (now) synth 660.0 1.0 44100 0 (zalloc)))
